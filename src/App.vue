<template>
  <div class="app">
    <h1>Telegram Mini App Ð½Ð° Vue3 ðŸš€</h1>
    <p>{{ userInfo }}</p>
    <button @click="closeApp">Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ Mini App</button>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'

const tg = window.Telegram.WebApp
const userInfo = ref('')

onMounted(() => {
  tg.ready()  // ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÑÐµÐ¼ Telegram, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾
  tg.expand() // Ñ€Ð°Ð·Ð²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð½Ð° Ð²ÐµÑÑŒ ÑÐºÑ€Ð°Ð½

  // Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
  userInfo.value = JSON.stringify(tg.initDataUnsafe.user || {})
})

// ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
const closeApp = () => tg.close()
</script>

<style scoped>
.app {
  padding: env(safe-area-inset-top) 16px env(safe-area-inset-bottom);
  text-align: center;
}
</style>